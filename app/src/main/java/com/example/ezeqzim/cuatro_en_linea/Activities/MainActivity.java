package com.example.ezeqzim.cuatro_en_linea.Activities;import android.content.Intent;import android.database.sqlite.SQLiteCursor;import android.os.Bundle;import android.support.v7.app.AppCompatActivity;import android.view.View;import android.widget.*;import com.example.ezeqzim.cuatro_en_linea.FrontEnd.Adapters.PlayerProfileAdapter;import com.example.ezeqzim.cuatro_en_linea.R;import com.example.ezeqzim.cuatro_en_linea.SQLConnection.Contracts.SQLDatabaseContract;import java.util.ArrayList;public class MainActivity extends AppCompatActivity {    private Spinner spinnerP1;    private Spinner spinnerP2;    private PlayerProfileAdapter playerProfileAdapterP1;    private PlayerProfileAdapter playerProfileAdapterP2;    private final int PROFILE_REQUEST = 1;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        initialize();        initializeSpinner(spinnerP1, playerProfileAdapterP1);        initializeSpinner(spinnerP2, playerProfileAdapterP2);    }    private void initialize() {        spinnerP1 = (Spinner) findViewById(R.id.player1);        spinnerP2 = (Spinner) findViewById(R.id.player2);        playerProfileAdapterP1 = new PlayerProfileAdapter(getApplicationContext());        playerProfileAdapterP2 = new PlayerProfileAdapter(getApplicationContext());    }    private void initializeSpinner(Spinner spinner, PlayerProfileAdapter playerProfileAdapter) {        spinner.setAdapter(playerProfileAdapter);        spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {            @Override            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {            }            @Override            public void onNothingSelected(AdapterView<?> parent) {            }        });    }    public void play(View view){        String s_rows = ((EditText) findViewById(R.id.rows)).getText().toString();        String s_cols = ((EditText) findViewById(R.id.cols)).getText().toString();        String s_player1 = ((SQLiteCursor) spinnerP1.getSelectedItem()).getString(((SQLiteCursor) spinnerP1.getSelectedItem()).getColumnIndex(SQLDatabaseContract.PlayerProfile.COLUMN_NAME_PLAYER_NAME));        String s_player2 = ((SQLiteCursor) spinnerP2.getSelectedItem()).getString(((SQLiteCursor) spinnerP2.getSelectedItem()).getColumnIndex(SQLDatabaseContract.PlayerProfile.COLUMN_NAME_PLAYER_NAME));        int rows, cols;        try {            rows = Integer.parseInt(s_rows);        }        catch (Exception e) {            rows = 7;        }        try {            cols = Integer.parseInt(s_cols);        }        catch (Exception e) {            cols = 7;        }        Intent play = new Intent(this, GameActivity.class);        play.putExtra("rows", rows);        play.putExtra("cols", cols);        ArrayList<String> players = new ArrayList<>();        players.add(s_player1);        players.add(s_player2);        play.putStringArrayListExtra("players", players);        Bundle bundle = new Bundle();        bundle.putSerializable("shapes", new int[][] {            {                R.drawable.button_circle_red_back,                R.drawable.button_circle_black_border            },            {                R.drawable.button_cross_red_back,                R.drawable.button_cross_black_border            }        });        play.putExtra("shapes", bundle);        startActivity(play);    }    public void createPlayerProfile(View v) {        Intent createProfile = new Intent(this, ProfileActivity.class);        startActivityForResult(createProfile, PROFILE_REQUEST);    }    @Override    protected void onActivityResult(int requestCode, int resultCode, Intent data) {        if (requestCode == PROFILE_REQUEST) {            if (resultCode == RESULT_OK) {                playerProfileAdapterP1.updateProfileAdapter(getApplicationContext());                playerProfileAdapterP2.updateProfileAdapter(getApplicationContext());            }        }    }}
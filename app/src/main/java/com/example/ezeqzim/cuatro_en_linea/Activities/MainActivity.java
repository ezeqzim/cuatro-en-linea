package com.example.ezeqzim.cuatro_en_linea.Activities;import android.content.Intent;import android.database.sqlite.SQLiteCursor;import android.graphics.Color;import android.os.Bundle;import android.support.v7.app.AppCompatActivity;import android.view.View;import android.widget.*;import com.example.ezeqzim.cuatro_en_linea.BackEnd.Player.PlayerProfile;import com.example.ezeqzim.cuatro_en_linea.FrontEnd.Adapters.PlayerProfileAdapter;import com.example.ezeqzim.cuatro_en_linea.R;import com.example.ezeqzim.cuatro_en_linea.SQLConnection.Contracts.SQLDatabaseContract;import java.util.ArrayList;public class MainActivity extends AppCompatActivity {    private Spinner spinnerP1;    private Spinner spinnerP2;    private PlayerProfileAdapter playerProfileAdapterP1;    private PlayerProfileAdapter playerProfileAdapterP2;    private final int PROFILE_REQUEST = 1;    private final int GAME_REQUEST = 2;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        initialize();        initializeSpinner(spinnerP1, playerProfileAdapterP1);        initializeSpinner(spinnerP2, playerProfileAdapterP2);    }    private void initialize() {        spinnerP1 = (Spinner) findViewById(R.id.player1);        spinnerP2 = (Spinner) findViewById(R.id.player2);        playerProfileAdapterP1 = new PlayerProfileAdapter(getApplicationContext());        playerProfileAdapterP2 = new PlayerProfileAdapter(getApplicationContext());    }    private void initializeSpinner(Spinner spinner, PlayerProfileAdapter playerProfileAdapter) {        spinner.setAdapter(playerProfileAdapter);        spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {            @Override            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {            }            @Override            public void onNothingSelected(AdapterView<?> parent) {            }        });    }    public void play(View view){        String s_rows = ((EditText) findViewById(R.id.rows)).getText().toString();        String s_cols = ((EditText) findViewById(R.id.cols)).getText().toString();        PlayerProfile playerProfile1 = new PlayerProfile(((SQLiteCursor) spinnerP1.getSelectedItem()).getString(((SQLiteCursor) spinnerP1.getSelectedItem()).getColumnIndex(SQLDatabaseContract.PlayerProfile.COLUMN_NAME_PLAYER_NAME)));        PlayerProfile playerProfile2 = new PlayerProfile(((SQLiteCursor) spinnerP2.getSelectedItem()).getString(((SQLiteCursor) spinnerP2.getSelectedItem()).getColumnIndex(SQLDatabaseContract.PlayerProfile.COLUMN_NAME_PLAYER_NAME)));        int rows, cols;        try {            rows = Integer.parseInt(s_rows);        }        catch (Exception e) {            rows = 7;        }        try {            cols = Integer.parseInt(s_cols);        }        catch (Exception e) {            cols = 7;        }        Intent play = new Intent(this, GameActivity.class);        play.putExtra("rows", rows);        play.putExtra("cols", cols);        Bundle bundle = new Bundle();        ArrayList<PlayerProfile> playerProfiles = new ArrayList<>();        playerProfiles.add(playerProfile1);        playerProfiles.add(playerProfile2);        bundle.putSerializable("playerProfiles", playerProfiles);        bundle.putSerializable("colors", new int[] {                Color.BLUE,                Color.GREEN        });        play.putExtra("bundle", bundle);        play.putExtra("gameMode", "bestOf");        play.putExtra("bestOf", 7);        startActivityForResult(play, GAME_REQUEST);    }    public void createPlayerProfile(View v) {        Intent createProfile = new Intent(this, ProfileActivity.class);        startActivityForResult(createProfile, PROFILE_REQUEST);    }    @Override    protected void onActivityResult(int requestCode, int resultCode, Intent data) {        switch (requestCode) {            case PROFILE_REQUEST:                if (resultCode == RESULT_OK) {                    playerProfileAdapterP1.updateProfileAdapter(getApplicationContext());                    playerProfileAdapterP2.updateProfileAdapter(getApplicationContext());                }                break;            case GAME_REQUEST:                if (resultCode == RESULT_OK) {                    PlayerProfile playerProfile = data.getParcelableExtra("winPlayer");                    TextView tv = (TextView) findViewById(R.id.last_winner);                    tv.setText(getResources().getString(R.string.last_winner) + " " + playerProfile.getName());                }        }    }}